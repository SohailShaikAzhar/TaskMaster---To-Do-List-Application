{% extends 'base.html' %}
{% block title %}Profile - {{ current_user.name }}{% endblock %}
{% block content %}
    <div class="profile-container">
        <div class="profile-header">
            <h1>{{ current_user.name }}'s Profile</h1>
            <p>Manage your tasks and account settings</p>
        </div>
        
        <div class="profile-content">
            <!-- Sidebar -->
            <div class="profile-sidebar">
                <div class="profile-avatar">
                    <div class="avatar-circle">
                        <span class="user-initials">
                            {{ current_user.name[0]|upper if current_user.name else 'U' }}
                        </span>
                    </div>
                    <h2>{{ current_user.name }}</h2>
                    <p class="user-email">{{ current_user.email }}</p>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total Tasks</span>
                        <span class="stat-value">{{ tasks_count }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Pending</span>
                        <span class="stat-value">{{ pending_tasks }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Completed</span>
                        <span class="stat-value">{{ completed_tasks }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Member Since</span>
                        <span class="stat-value">{{ member_since }}</span>
                    </div>
                </div>
                
                <div class="profile-quick-actions">
                    <a href="{{ url_for('dashboard') }}" class="quick-action-btn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                        </svg>
                        Dashboard
                    </a>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="profile-main">
                <!-- Personal Information -->
                <div class="profile-section">
                    <h2>Personal Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Full Name</span>
                            <div class="info-value">{{ current_user.name }}</div>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Email Address</span>
                            <div class="info-value">{{ current_user.email }}</div>
                        </div>
                        <div class="info-item">
                            <span class="info-label">User ID</span>
                            <div class="info-value">#{{ current_user.id }}</div>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Account Type</span>
                            <div class="info-value">{{ account_type }}</div>
                        </div>
                    </div>
                </div>
                
                <!-- Task Statistics -->
                <div class="profile-section">
                    <h2>Task Statistics</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: #3b82f6;">
                                üìã
                            </div>
                            <div class="stat-card-content">
                                <h3>{{ tasks_count }}</h3>
                                <p>Total Tasks</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: #10b981;">
                                ‚úÖ
                            </div>
                            <div class="stat-card-content">
                                <h3>{{ completed_tasks }}</h3>
                                <p>Completed</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: #f59e0b;">
                                ‚è≥
                            </div>
                            <div class="stat-card-content">
                                <h3>{{ pending_tasks }}</h3>
                                <p>Pending</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: #8b5cf6;">
                                üìä
                            </div>
                            <div class="stat-card-content">
                                <h3>{{ "%.0f"|format((completed_tasks/tasks_count*100) if tasks_count > 0 else 0) }}%</h3>
                                <p>Completion Rate</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Tasks -->
                {% if recent_activity %}
                <div class="profile-section">
                    <h2>Recent Tasks</h2>
                    <div class="activity-list">
                        {% for activity in recent_activity %}
                        <div class="activity-item">
                            <div class="activity-icon">
                                {% if activity.type == 'task_created' %}
                                üìù
                                {% else %}
                                ‚ÑπÔ∏è
                                {% endif %}
                            </div>
                            <div class="activity-content">
                                <h4>{{ activity.title }}</h4>
                                <p>{{ activity.description }}</p>
                            </div>
                            <span class="activity-time">{{ activity.time }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="view-all">
                        <a href="{{ url_for('dashboard') }}" class="view-all-link">View All Tasks ‚Üí</a>
                    </div>
                </div>
                {% endif %}
                
                <!-- Account Actions -->
                <div class="profile-section">
                    <h2>Account Actions</h2>
                    <div class="profile-actions">
                        <a href="{{ url_for('edit_profile') if 'edit_profile' in url_for.__code__.co_names else '#' }}" 
                           class="profile-action-btn {% if 'edit_profile' not in url_for.__code__.co_names %}disabled{% endif %}">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                            Edit Profile
                        </a>
                        <a href="#" class="profile-action-btn secondary disabled">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                            </svg>
                            Change Password
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Logout Section -->
        <div class="logout-container">
            <a href="{{ url_for('logout') }}" class="logout-btn">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
                Logout
            </a>
        </div>
    </div>
{% endblock %}